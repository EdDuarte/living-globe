<!doctype html>
<html lang="en">

<head>
	<title>3D Earth</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link rel="stylesheet" href='http://fonts.googleapis.com/css?family=Raleway:300' type='text/css'>
	<link rel="stylesheet" href="css/base.css">
	<link rel="stylesheet" href="css/lib/bootstrap.css">
	<link rel="stylesheet" href="css/lib/bootstrap-slider.min.css">
	<link rel="stylesheet" href="css/lib/jquery-ui.min.css" />
	<link rel="stylesheet" href="css/lib/jquery.nouislider.min.css">
	<link rel="stylesheet" href="css/lib/jquery.nouislider.pips.css">
</head>

<body>
	<script type="text/javascript" src="js/lib/three.js"></script>
	<script type="text/javascript" src="js/lib/OrbitControls.js"></script>
	<script type="text/javascript" src="js/lib/TrackballControls.js"></script>
	<script type="text/javascript" src="js/lib/THREEx.FullScreen.js"></script>
	<script type="text/javascript" src="js/lib/THREEx.WindowResize.js"></script>
	<script type="text/javascript" src="js/lib/detector.js"></script>

	<script type="text/javascript" src="js/lib/jquery-1.11.2.min.js"></script>
	<script type="text/javascript" src="js/lib/jquery-ui.min.js"></script>
	<script type="text/javascript" src="js/lib/jquery.autocomplete.js"></script>
	<script type="text/javascript" src="js/lib/jquery.csv-0.71.min.js"></script>
	<script type="text/javascript" src="js/lib/jquery.nouislider.all.min.js"></script>
	<script type="text/javascript" src="js/lib/numeral.min.js"></script>
	<script type="text/javascript" src="js/lib/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/lib/bootstrap-slider.min.js"></script>

	<script type="text/javascript" src="js/lib/chroma.min.js"></script>
	<script type="text/javascript" src="js/lib/utils.js"></script>

	<script type="text/javascript" src="js/lib/postprocessing/EffectComposer.js"></script>
	<script type="text/javascript" src="js/lib/postprocessing/RenderPass.js"></script>
	<script type="text/javascript" src="js/lib/postprocessing/ShaderPass.js"></script>
	<script type="text/javascript" src="js/lib/postprocessing/MaskPass.js"></script>

	<script type="text/javascript" src="js/lib/shaders/CopyShader.js"></script>
	<script type="text/javascript" src="js/lib/shaders/FXAAShader.js"></script>

	<div id="search" >
		<form class="navbar-search pull-left">
			<input id="searchfield" type="text" class="search-query" autofocus="true" placeholder="Search">
		</form>
	</div>

	<div id="worldIntercept">
		<div id="parameters" >
			<br/><br/>

			<table>
				<tr>
					<td width="80px">
						<div id="sliderPopulation" style="height: 300px;"></div>
						<div id="sliderDensity" hidden="true" style="height: 300px;"></div>
						<div id="sliderBirth" hidden="true" style="height: 300px;"></div>
						<div id="sliderDeath" hidden="true" style="height: 300px;"></div>
					</td>
					<td>
						<spam id="detailsContainer" style="color: white;"></spam>
					</td>
				</tr>
			</table>
			<br/><br/>
			<div class="btn-group" data-toggle="buttons-radio">
				<button id="buttonPopulation" type="button" class="btn btn-large btn-inverse btn active">Population</button>
				<button id="buttonDensity" type="button" class="btn btn-large btn-inverse">Density</button>
				<button id="buttonBirth" type="button" class="btn btn-large btn-inverse">Birth Rate</button>
				<button id="buttonDeath" type="button" class="btn btn-large btn-inverse">Death Rate</button>
			</div>

		</div>
		<div id="credits" style="color: white;">
			Ed Duarte & Pedro Bordonhos - All rights reserved 2015
		</div>

		<div id="worldContainer" style="width: 100%; height: 100%; background-color:black; " />
	</div>

	<script id="globeVertexShader" type="x-shader/x-vertex">
		varying vec3 vNormal;
		varying vec2 vUv;
		void main()
		{
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0);
			vNormal = normalize( normalMatrix * normal );
			vUv = uv;
		}
	</script>

	<script id="globeFragmentShader" type="x-shader/x-fragment">
		uniform sampler2D mapIndex;
		uniform sampler2D ratio;
		uniform sampler2D select;
		uniform sampler2D outline;
		uniform sampler2D blendImage;
		varying vec3 vNormal;
		varying vec2 vUv;
		void main() {
			vec4 mapColor = texture2D( mapIndex, vUv );
			float indexedColor = mapColor.y;

			vec2 ratioUV = vec2( indexedColor, 0.0 );
			vec4 ratioColor = texture2D( ratio, ratioUV );

			vec2 selectUV = vec2( indexedColor, 0.0 );
			vec4 selectColor = texture2D( select, selectUV );

			vec4 outlineColor = texture2D( outline, vUv );
			vec4 blendColor = texture2D( blendImage, vUv );
			// if (outlineColor.x > 0.1) outlineColor = vec4(1.0,1.0,1.0,1.0);

			gl_FragColor = 0.5 * outlineColor + 1.0 * ratioColor + 1.0 * selectColor + 0.5 * blendColor;
		}
	</script>

	<script type="text/javascript" src="js/base.js"></script>

</body>

</html>
